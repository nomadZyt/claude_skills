---
name: 项目梳理分析器
description: 用于系统性分析项目结构、技术栈、数据流转、核心功能和业务特性的技能。支持全量分析和模块分析两种模式，适用于技术交接、代码审查、项目复盘等场景。
---

# 项目梳理分析器

## 使用场景

当用户需要以下操作时，使用此技能：
- 梳理整个项目结构
- 分析某个功能模块
- 了解项目技术栈
- 追踪数据流转链路
- 理解业务逻辑实现
- 生成项目分析文档

## 分析模式

### 模式1：全量分析
用户说类似以下的话时触发：
- "帮我梳理一下这个项目"
- "分析整个项目结构"
- "生成项目分析文档"
- "项目全量梳理"

### 模式2：模块分析
用户说类似以下的话时触发：
- "分析一下 xxx 功能"
- "梳理 xxx 模块"
- "xxx 是怎么实现的"
- "xxx 的数据流转是什么样的"

---

## 分析工作流程

### 第一步：信息收集

#### 1.1 识别项目类型
读取以下文件判断项目类型：
- `package.json` - Node.js/前端项目
- `requirements.txt` / `pyproject.toml` / `setup.py` - Python项目
- `pom.xml` / `build.gradle` - Java项目
- `go.mod` - Go项目
- `Cargo.toml` - Rust项目

#### 1.2 收集项目元信息
```
必读文件：
- package.json / 依赖管理文件 → 依赖版本、脚本命令
- README.md → 项目说明
- 配置文件（webpack.config.js, vite.config.js, tsconfig.json 等）→ 构建配置
```

#### 1.3 扫描目录结构
```
使用 LS 工具扫描根目录，识别：
- src/ → 源代码目录
- test/ → 测试目录
- config/ → 配置目录
- docs/ → 文档目录
- scripts/ → 脚本目录
```

### 第二步：六维度分析

#### 维度1：项目概览
**分析目标**：一句话说清楚项目是什么

**分析要点**：
- 项目名称和定位
- 核心业务场景
- 目标用户群体（B端/C端/内部系统）
- 项目价值和作用

**信息来源**：
- README.md
- package.json 的 description 字段
- 入口文件注释
- 路由配置（判断功能范围）

#### 维度2：技术栈识别
**分析目标**：列出项目使用的所有技术及版本

**分析要点**：
| 类别 | 识别方法 |
|------|---------|
| 框架 | package.json dependencies（Vue/React/Angular等）|
| 状态管理 | Vuex/Redux/Pinia/MobX 等 |
| 路由 | vue-router/react-router 等 |
| UI组件库 | Element/Ant Design/Vant 等 |
| 构建工具 | Webpack/Vite/Rollup 配置文件 |
| HTTP客户端 | Axios/Fetch 封装 |
| CSS预处理 | Sass/Less/Stylus |
| 代码规范 | ESLint/Prettier/Stylelint 配置 |

**输出格式**：
```markdown
| 类别 | 技术选型 | 版本 |
|------|---------|------|
| 框架 | Vue | 2.7.16 |
| ... | ... | ... |
```

#### 维度3：项目结构分析
**分析目标**：理清代码组织方式和模块职责

**分析要点**：
- 目录分层（router/pages/components/store/api/utils）
- 模块划分方式（按功能/按业务/按技术层）
- 关键文件职责
- 配置文件说明

**输出格式**：
```
src/
├── api/                  # API接口层
│   ├── http.js           # HTTP请求封装
│   └── xxx.js            # 具体业务API
├── components/           # 组件层
│   ├── common/           # 通用组件
│   └── business/         # 业务组件
├── pages/                # 页面层
├── router/               # 路由层
├── store/                # 状态管理层
├── utils/                # 工具函数层
└── main.js               # 入口文件
```

#### 维度4：数据流转分析
**分析目标**：追踪数据从API到UI的完整链路

**分析步骤**：
1. **找到API层**：搜索 HTTP 请求封装和接口定义
2. **找到状态层**：搜索 Store/State 定义和 mutations/actions
3. **找到页面层**：搜索页面组件如何调用API和读取状态
4. **画出流转图**：API → Store → Component → Template

**输出格式**：
```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   API层     │ ──► │   状态层    │ ──► │   视图层    │
│  api/xxx.js │     │ store/xxx.js│     │ pages/xxx   │
└─────────────┘     └─────────────┘     └─────────────┘
      │                   │                   │
      │ HTTP请求          │ state/getters     │ computed/methods
      ▼                   ▼                   ▼
   后端接口           Vuex Store          Vue组件
```

**关键代码追踪**：
```javascript
// 示例：追踪一个完整的数据流
// 1. API定义
export const fetchUserInfo = () => http.get('/api/user/info');

// 2. Store调用
actions: {
  async getUserInfo({ commit }) {
    const data = await fetchUserInfo();
    commit('SET_USER_INFO', data);
  }
}

// 3. 组件使用
computed: {
  ...mapState(['userInfo'])
}
```

#### 维度5：核心功能实现
**分析目标**：梳理关键业务流程的代码实现

**分析步骤**：
1. **识别核心功能**：从路由配置、首页入口识别主要功能
2. **梳理业务流程**：画出功能的完整流程图
3. **关键代码定位**：找到实现每一步的具体代码
4. **技术亮点提取**：识别有价值的技术实现

**输出格式**：
```
### 功能名称：XXX

#### 业务流程
入口 → 步骤1 → 步骤2 → ... → 结果页

#### 关键代码
- 入口：`src/pages/xxx/index.vue` 的 `goNext()` 方法
- 校验：`src/api/xxx.js` 的 `validate()` 接口
- 核心逻辑：`src/pages/xxx/common.js` 的 `process()` 方法

#### 代码片段
// 关键代码片段和解释
```

#### 维度6：业务特性
**分析目标**：识别项目的业务规则和特殊逻辑

**分析要点**：
- **配置化能力**：哪些功能通过配置控制
- **多环境支持**：环境变量、接口地址配置
- **权限控制**：B端/C端区分、角色权限
- **特殊业务规则**：地区差异、时间限制等
- **错误处理**：统一错误处理、重试机制
- **性能优化**：懒加载、缓存策略

**输出格式**：
```markdown
### 业务特性清单

| 特性 | 说明 | 相关代码 |
|------|------|---------|
| B端/C端适配 | 通过URL判断，控制功能可见性 | `src/js/config.js` |
| 多环境配置 | 支持dev/test/pre/prd四套环境 | `src/js/config.js` |
| ... | ... | ... |
```

---

## 模块分析模式

当用户要求分析特定模块时，聚焦以下内容：

### 模块分析模板

```markdown
# [模块名称] 模块分析

## 1. 模块概述
- 功能定位：
- 使用场景：
- 核心能力：

## 2. 文件结构
```
模块目录/
├── index.vue         # 入口页面
├── components/       # 子组件
├── utils.js          # 工具函数
└── style.scss        # 样式文件
```

## 3. 数据结构
- 入参：
- 出参：
- 状态：

## 4. 核心流程
流程图或步骤说明

## 5. 关键代码
代码片段和解释

## 6. 依赖关系
- 依赖的组件：
- 依赖的API：
- 依赖的Store：

## 7. 注意事项
- 边界情况：
- 已知问题：
- 优化建议：
```

---

## 输出文档模板

### 全量分析文档结构

```markdown
# [项目名称] 项目结构梳理

> 用于技术交接和工作复盘的项目分析文档
> 生成时间：YYYY-MM-DD

---

## 1. 项目一句话总结
**xxx项目**，[核心功能]，[业务场景]，[目标用户]。

---

## 2. 技术栈与整体架构说明

### 2.1 核心技术栈
| 类别 | 技术选型 | 版本 |
|------|---------|------|
| ... | ... | ... |

### 2.2 整体架构
机构图要串联整体流程并在分支上标注出跳转的关键跳转条件
[架构图]

### 2.3 多环境配置
[环境配置说明]

---

## 3. 核心模块清单

### 3.1 [模块1名称]
| 文件 | 职责 |
|------|------|
| ... | ... |

### 3.2 [模块2名称]
...

---

## 4. 关键业务流程梳理

### 4.1 [流程1名称]
[流程图]
[代码说明]

### 4.2 [流程2名称]
...

---

## 5. 前端工程价值与亮点抽象

### 5.1 [亮点1]
[说明和代码示例]

### 5.2 [亮点2]
...

---

## 6. 目录结构速览
[目录树]

---

## 7. 总结
[项目特点总结]

---

## 附录：关键API接口清单
| 接口路径 | 方法 | 用途 |
|---------|------|------|
| ... | ... | ... |
```
#### 文档输出路径
- 项目分析：输出MD文档到当前项目的根目录
- 功能模块分析：输出MD文到当前模块的目录下
---

## 分析技巧

### 快速定位关键文件
```
1. 入口文件：main.js / index.js / App.vue
2. 路由配置：router/index.js → 了解所有页面
3. 状态管理：store/index.js → 了解全局状态
4. API封装：api/http.js → 了解请求机制
5. 公共配置：config/*.js → 了解业务配置
```

### 追踪代码链路
```
1. 从路由找页面：router → pages
2. 从页面找组件：pages → components
3. 从组件找API：components → api
4. 从API找后端：api → 接口文档
```

### 识别代码模式
```
1. 组件通信：props/emit、provide/inject、vuex
2. 异步处理：async/await、Promise、回调
3. 状态管理：state/getters/mutations/actions
4. 工具封装：utils、helpers、mixins
```

---

## 注意事项

1. **先读后写**：分析前必须先读取关键文件，不要凭猜测
2. **追根溯源**：遇到函数调用要追踪到定义处
3. **关注注释**：代码注释往往包含重要业务信息
4. **识别模式**：关注项目中重复出现的代码模式
5. **提取价值**：不只是描述代码，要提炼工程价值和最佳实践
